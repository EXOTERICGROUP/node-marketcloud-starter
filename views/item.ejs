<% include header %>

    <!-- Page Content -->
    <div class="container" style="margin-top:100px;" ng-app="MarketcloudExpressStarter" ng-controller="ItemController" >
    <div class="row">
        <div class="col-xs-12 col-md-4 col-md-offset-2">
            <h2><%= product.name %></h2>
        </div>
    </div>
    <div class="row">

            <div class="col-md-4 col-md-offset-2">
                <div class="thumbnail">
                    <% if (product.hasOwnProperty('images')) { %>
                            <img src="<%= product.images[0] %>" alt="" style="max-width:100%;">
                            <% } else {%>
                                <img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=200%C3%97200&w=400&h=800" alt="" style="max-width:100%;">
                            <% } %>
                </div>
            </div>

            <div class="col-md-4">

                <div class="thumbnail">
                    <h3 class="price text-center"><%= product.display_price %></h3>
                    <% for(var k in product.variantsDefinition) { %>
                        <div><b><%= k %></b></div>
                        <div class="form-group">
                        <select class="form-control" ng-model="selectedVariants.<%= k %>">
                            <% for(var i=0; i< product.variantsDefinition[k].length;i++) { %>
                            <option value="<%= product.variantsDefinition[k][i] %>"><%= product.variantsDefinition[k][i] %></option>
                        <% } %>
                        </select>
                        </div>
                    <% } %>
                    <button class="btn btn-block btn-success" ng-click="addToCart()" ng-disabled="addingToCart === true">Add to cart</button>
                </div>

                <div class="table-responsive">
                    <table class="table">
                    <thead>
                        <tr><th>Attribute</th><th>Value</th></tr>
                    </thead>
                    <tbody>
                        <% for (var k in product) { 
                            var unwanted = [
                            'id', 'product_id', 'stock_type', 'stock_level', 'variant_id', 'display_price','price','name'
                            ]
                            if ('object' !== typeof product[k] && unwanted.indexOf(k) < 0) {
                        %>
                        <tr><td><%= k %></td><td><%= product[k] %></td></tr>
                        <% }
                        }
                        %>
                        </tbody>
                    </table>
                </div>
                

            </div>


        </div>
        <div class="row">
            <div class="col-xs-12 col-md-4 col-md-offset-2">
                <h3>Description</h3>
                <div><%= product.description %></div>
            </div>
            <div class="col-md-4">
                <div class="table-responsive">
                    <table class="table">
                        
                    </table>
                </div>
            </div>
        </div>

    </div>
    <!-- /.container -->

    <div class="container">

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Your Website 2014</p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->
    <script src="/components/angular/angular.min.js"></script>
    
    <!-- jQuery -->
    <script src="/components/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/components/marketcloud-js/dist/marketcloud.min.js"></script>
    <div id="product_data" class="hide"><%= JSON.stringify(product) %></div>
    <div id="cart_data" class="hide"><%= JSON.stringify(cart) %></div>
    <script src="/js/item.js"></script>
    <script type="text/javascript" src="/components/notie/notie.js"></script>

</body>

</html>